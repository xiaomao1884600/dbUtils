<!--
<style>
    md-input-container {
        vertical-align:top;
    }

</style>
-->
<div layout="row">

    <term selected-term-id="'next'" start-term-id="166" selected-term="$ctrl.selectedTerm" on-loaded="$ctrl.onTermLoaded" on-change="$ctrl.onTermChange"></term>


    <md-input-container>
        <md-select ng-model="$ctrl.selectedCampus" placeholder="请选择校区" >
            <md-option ng-value="item" ng-repeat="item in $ctrl.campuses">{{ item.name }}</md-option>
        </md-select>
    </md-input-container>

    <d-date-range-picker start-time="$ctrl.startTime" end-time="$ctrl.endTime" date-group="$ctrl.dateGroup" no-today="'true'" max-end-date="$ctrl.today"></d-date-range-picker>

    <!--
    <md-input-container>
        <label>预警人数</label>
        <input name="warningCount" ng-model="$ctrl.warningCount" placeholder="请输入预警人数" type="number"
               required ng-maxlength="2">
    </md-input-container>
     -->
    <md-input-container>
        <md-checkbox ng-model="$ctrl.showExpectation" aria-label="显示预测值" class="md-align-top-left md-primary" ng-true-value="true" ng-false-value="false" ng-change="$ctrl.onShowExpectationClick()">
            显示预测值
        </md-checkbox>
    </md-input-container>

    <md-input-container>
        <md-button ng-click="$ctrl.getData()" class="md-primary">查询</md-button>
    </md-input-container>
</div>
<div>
    <label ng-show="$ctrl.showExpectation">TCPI指数表示在接下来的每天中，每天需要比以往的每天努力的倍数，才能为该班招生25人，数字越大，表示困难越大</label>
</div>

<div>
    <d-grid grid-data="$ctrl.data" column-defines="$ctrl.__columnDefines" select-model="'single'" operations="$ctrl.__operations"></d-grid>
</div>

<div style="visibility: hidden; width:300px;height: auto">
    <div class="md-dialog-container" id="noteDetail">
        <md-dialog layout-padding="" style="width: 500px">
            <md-toolbar class="md-theme-light" style="padding: 0">
                <h2 class="md-toolbar-tools">
                    <span>添加新备注</span>
                    <md-button ng-click="$ctrl.saveNote()">保存</md-button>
                </h2>
            </md-toolbar>

            <md-content style="height: 100px;">
                <textarea style="width: 95%; height: 60px;" ng-model="$ctrl.currentNote"></textarea>
            </md-content>

            <md-toolbar class="md-theme-light" style="padding: 0">
                <h2 class="md-toolbar-tools">
                    <span>历史备注</span>
                </h2>
            </md-toolbar>

            <md-content>
                <md-list>
                    <md-list-item class="md-3-line" ng-repeat="item in $ctrl.currentClass.remark_list">
                        <div class="md-list-item-text">
                            <h4>{{item.username}} 于 {{item.updated_at}} 备注：</h4>
                            <p>{{item.remark}}</p>
                        </div>
                        <md-divider md-inset ng-if="!$last"></md-divider>
                    </md-list-item>
                </md-list>
            </md-content>
        </md-dialog>
    </div>
</div>